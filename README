# Тестовое задание - система ставок

### Описание

Проект реализован в виде четырех сервисов:

 - **line_provider_api** - административное API для управления событиями
 - **line_finisher** - сервис завершает события с истекшим deadline с случаным результатом
 - **bet_maker_api** - API для осуществления ставок
 - **bet_proccessing** - завершает ставки при закрытии события

 Коммуникация меджу сервисами происходит через RabbitMQ

### Разворавчивание проекта

```
    cd path/to/the/project
    docker-compose up
```

### Запуск тестов

Тесты в проекты представленны  интеграционным тестов через pytest
Для его запуска необходимо:

```
    cd path/to/the/project/integrity_test
    poetry install
    poetry shell
    pytest
```

Интеграционный тест осуществляет следушее:

 - Создает событие со статусом new и дедлайном через 5 секунд
 - Проверяет его получение из API
 - Создает ставку
 - Ожидает дедлайна события
 - Получение событие и проверяет его завершенный статус
 - Получение ставку и проверяет ее завершенный статус


### Ссылки на API и Swagger

    - **line_provider API:** <http://127.0.0.1:8010>
    - **line_provider Swagger:** <http://127.0.0.1:8010/docs/>
    - **bet_maker API:** <http://127.0.0.1:8011>
    - **bet_maker Swagger:** <http://127.0.0.1:8011>
